<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>JMeter教程 │ 我的个人博客</title><link rel="stylesheet" href="/css/oasis.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="我的个人博客" type="application/atom+xml">
</head><body><div id="content"><h1 id="title">JMeter教程</h1><div id="menu-outer"><nav id="menu-inner"><a id="menu-back" href="javascript:history.back()">Back</a><time datetime="2024-08-24T03:08:40.000Z">2024-08-24</time></nav></div><div id="content-outer"><div id="content-inner"><article id="post"><style>
 body {
    /* font-family: "宋体", SimSun, serif; */
    font-size: 16px;
  }
   p {
    line-height: 1.7;
  }
</style>

<p>学习视频链接：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1wC4y1Y7yX">https://www.bilibili.com/video/BV1wC4y1Y7yX</a></p>
<h2 id="性能测试概述"><a href="#性能测试概述" class="headerlink" title="性能测试概述"></a>性能测试概述</h2><h3 id="为什么做性能测试"><a href="#为什么做性能测试" class="headerlink" title="为什么做性能测试"></a>为什么做性能测试</h3><h3 id="性能测试的关注点"><a href="#性能测试的关注点" class="headerlink" title="性能测试的关注点"></a>性能测试的关注点</h3><ul>
<li><p>时间特性：表示系统处理用户请求的响应时间 </p>
</li>
<li><p>资源特性：表示系统运行过程中，系统资源的消耗情况，包括CPU、内存、磁盘等</p>
</li>
</ul>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul>
<li>使用自动化工具，模拟不同的场景，对软件各项性能指标进行测试和评估的过程。  <img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/gainian.png" class="" title="alt text"></li>
</ul>
<h3 id="方面"><a href="#方面" class="headerlink" title="方面"></a>方面</h3><h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><ul>
<li><p>评估当前系统能力</p>
<p>例如：</p>
<p>1）验收第三方提供的软件。</p>
<img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/yanshou.png" class="" title="alt text">

<p>2）获取关键的性能指标，与竞品比较。</p>
<img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/duibi.png" class="" title="alt text">
</li>
<li><p>寻找性能瓶颈，优化性能</p>
</li>
<li><p>评估软件是否满足未来的需要</p>
</li>
</ul>
  <img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/future.png" class="" title="alt text">

<h3 id="性能测试和功能测试"><a href="#性能测试和功能测试" class="headerlink" title="性能测试和功能测试"></a>性能测试和功能测试</h3><ul>
<li><p>目的不一样</p>
<ul>
<li><p>功能测试：验证软件功能是否符合<font color=red>功能需求规格</font>，主要焦点在功能<font color=red>（正向、逆向）</font></p>
<blockquote>
<p>正向功能，例如：输入正确的用户名密码，登录成功<br>逆向功能，例如：输入错误的用户名密码，登录失败给出提示</p>
</blockquote>
</li>
<li><p>性能测试：验证软件是否满足<font color=red>业务需求场景</font>，主要焦点是业务场景的满足<font color=red>（时间、资源）</font></p>
<blockquote>
<p>例如：100万人使用正确的用户名密码登陆，1秒内能登录成功，—时间<br>同时服务器的CPU使用率低于70%，内存使用率低于60%等。—资源</p>
</blockquote>
</li>
</ul>
</li>
<li><p>有什么关系？</p>
<ul>
<li><p>可以只做功能测试，不做性能测试吗？<br>可以，以前甚至是现在，小公司、小项目只做功能，不做性能。“性能”从实际使用来说，不是必须的。但是按照合理的项目研发过程而言，都是需要同时做功能、性能的。如果初始用户只有几十个人，那不做性能也没问题，有问题就现改；但如果用户量到了几十万、几百万，就肯定需要。</p>
</li>
<li><p>功能测试和性能测试要一起做吗？<br><b> 不是，功能测试优先于性能测试。并且是功能测试完成，并且bug修复完成以后，才做性能测试。</b> 只要代码还要改，那做性能测试没有用。因为代码修改会影响性能测试的结果。</p>
</li>
</ul>
</li>
</ul>
<h3 id="性能测试类型"><a href="#性能测试类型" class="headerlink" title="性能测试类型"></a>性能测试类型</h3><h4 id="基准测试"><a href="#基准测试" class="headerlink" title="基准测试"></a>基准测试</h4><p>  狭义上讲，就是单用户测试（单用户循环多次得到的数据）</p>
  <img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/jzcs1.png" class="" title="alt text">

<p>  广义上讲，就是建立基准线，当系统的软硬件环境发生变化之后再进行一次基准测试以确定变化对性能的影响。</p>
  <img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/jzcs2.png" class="" title="alt text">

<blockquote>
<p>基准测试不会单独存在，是为多用户并发测试和综合场景测试等提供参考依据，为系统&#x2F;环境配置、系统优化前后的性能提升&#x2F;下降提供参考指标。</p>
</blockquote>
<h4 id="负载测试（常用）"><a href="#负载测试（常用）" class="headerlink" title="负载测试（常用）"></a>负载测试（常用）</h4><p>负载测试是什么？为什么要做负载测试？负载测试的应用场景？</p>
<blockquote>
<p>引子：电商系统平时可以正常运行，双十一时能保证也可以正常运行吗？</p>
</blockquote>
<ul>
<li>用户量大</li>
</ul>
<p>负载测试：通过<font color=red>逐步增加系统负载</font>，确定在<font color=red>满足系统的性能指标情况下</font>，找出系统所能够承受的<font color=red>最大负载量</font>的测试。</p>
<img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/fz1.png" class="" title="alt text">

<ul>
<li>使用JMeter的线程数模拟用户量。</li>
</ul>
  <img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/fz2.png" class="" title="alt text">

  <img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/fz3.png" class="" title="alt text">


<ul>
<li>当系统<font color=red>最大负载量</font>达到<font color=red>用户要求</font>时，系统才能正式上线使用。</li>
</ul>
<h4 id="稳定性测试（常用）"><a href="#稳定性测试（常用）" class="headerlink" title="稳定性测试（常用）"></a>稳定性测试（常用）</h4><blockquote>
<p>引子：电商系统能抗住双十一时的考验，能保证长时间运行不出问题吗？</p>
</blockquote>
<p>稳定性测试：在服务器<font color=red>稳定运行（用户正常的业务负载下）</font>的情况下进行<font color=red>长时间测试（1天-1周等）</font>，并最终保证服务器能满足线上业务需求。</p>
<img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/wd1.png" class="" title="alt text">

<h4 id="压力测试"><a href="#压力测试" class="headerlink" title="压力测试"></a>压力测试</h4><p>引子：软件实际使用时，用户量超过预期（系统最大负载量），该如何反应？</p>
<p>压力测试：在强负载下的测试，查看系统在<font color=red>峰值情况下</font>是否有功能隐患、系统是否具有良好的<font color=red>容错能力</font>和<font color=red>可恢复能力</font>。</p>
<p>（1）极限负载情况下导致系统崩溃的破坏性压力测试</p>
<p>（2）高负载下的长时间的稳定性压力测试</p>
<h4 id="并发测试"><a href="#并发测试" class="headerlink" title="并发测试"></a>并发测试</h4><p>引子：电商系统能抗住双十一的考验，能保证在秒杀活动时不出问题吗？</p>
<p>并发测试（绝对并发）：是指在<font color=red>极短的时间内</font>，发送<font color=red>多个请求</font>，来验证服务器对并发的处理能力。</p>
<p>应用场景：特定活动场景，如：抢红包、秒杀、抢购等类似场景（其余场景只需要做负载测试，不需要做并发测试）</p>
<h3 id="性能测试总结"><a href="#性能测试总结" class="headerlink" title="性能测试总结"></a>性能测试总结</h3><img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/zongjie.png" class="" title="alt text">

<h3 id="性能测试指标"><a href="#性能测试指标" class="headerlink" title="性能测试指标"></a>性能测试指标</h3><p>为什么要定性能测试的指标？</p>
<p>（1）如何衡量功能</p>
<ul>
<li>有&#x2F;没有</li>
<li>肉眼可观察、可衡量</li>
</ul>
<p>（2）如何衡量性能</p>
<ul>
<li>好&#x2F;不好</li>
<li>个人感受，不容易量化，不好衡量</li>
</ul>
<p>性能测试的指标：一些经过运算得出的结果，来量化衡量某种操作的性能好坏，如：错误率 0.5%</p>
<h4 id="响应时间"><a href="#响应时间" class="headerlink" title="响应时间"></a>响应时间</h4><p>响应时间：用户<font color=red>从客户端发起一个请求开始</font>，到客户端<font color=red>接收到从服务器端返回的结果</font>，整个过程所耗费的时间。（包括：服务器处理时间+网络传输时间）</p>
<ul>
<li><p>通过HTTP接口请求消息来测试</p>
</li>
<li><p>只包括后端接口数据返回时间，不包括前端渲染数据的时间</p>
</li>
</ul>
<img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/time.png" class="" title="alt text">


<h4 id="并发数"><a href="#并发数" class="headerlink" title="并发数"></a>并发数</h4><p>并发数：某一时刻同时向服务器发送请求的用户数。</p>
<img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/bf.png" class="" title="alt text">


<h4 id="吞吐量"><a href="#吞吐量" class="headerlink" title="吞吐量"></a>吞吐量</h4><p>吞吐量：单位时间内处理客户端请求数量，直接体现软件的性能承载能力。</p>
<p>（1）从业务角度来看：“业务数&#x2F;小时”，“业务数&#x2F;天”，“访问人数&#x2F;天”，“页面访问量&#x2F;天”</p>
<p>（2）从网络角度来看：“字节数&#x2F;小时”，“字节数&#x2F;天”</p>
<p>（3）从技术角度来看：每秒事务数（TPS）、每秒查询数（QPS）</p>
<ul>
<li><p>吞吐量（QPS - Query Per Second）每秒查询数：即控制服务器每秒处理的指定请求的数量。</p>
<img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/qps.png" class="" title="alt text">

</li>
<li><p>吞吐量（TPS - Transactions Per Second）每秒事务数：即控制服务器每秒处理的事务请求的数量。</p>
<ul>
<li>事务：即业务，页面上的一次操作，可能对应一个&#x2F;多个请求。</li>
</ul>
<img src="/2024/08/24/JMeter%E6%95%99%E7%A8%8B/tps.png" class="" title="alt text"></li>
</ul>
<h4 id="点击数"><a href="#点击数" class="headerlink" title="点击数"></a>点击数</h4><p>点击数：客户端向服务器端发送请求时，所有的<font color=red>页面资源元素</font>（如：图片、链接、框架css、js等）的请求总数量。</p>
<p>注意：</p>
<ul>
<li><p>只有web项目才有此指标</p>
</li>
<li><p>点击数不是指页面上的一次点击</p>
</li>
</ul>
<h4 id="错误率"><a href="#错误率" class="headerlink" title="错误率"></a>错误率</h4><p>错误率：系统在负载情况下，失败业务的概率。错误率 &#x3D; （失败业务数&#x2F;业务综述）*100%</p>
<p>注意：</p>
<ul>
<li><p>大多系统都会要求错误率无限接近于0</p>
</li>
<li><p>错误率是一个性能指标，不是功能上的随机bug</p>
</li>
</ul>
<h4 id="资源使用率"><a href="#资源使用率" class="headerlink" title="资源使用率"></a>资源使用率</h4><p>资源使用率：是指系统各种资源的使用情况，一般用“资源的使用量&#x2F;总的资源可用量 * 100%”形成资源利用率的数据。</p>
<p>根据经验，资源指标通常要求：（供参考）</p>
<ul>
<li><p>CPU不高于 75%-85%</p>
</li>
<li><p>内存不高于 80%</p>
</li>
<li><p>磁盘IO不高于 90%</p>
</li>
<li><p>网络不高于 80%</p>
</li>
</ul>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4>  


<h3 id="性能测试流程"><a href="#性能测试流程" class="headerlink" title="性能测试流程"></a>性能测试流程</h3><blockquote>
<p>被分配了性能测试任务，需要按照什么样的步骤来推进？</p>
</blockquote>



<ol>
<li><p>性能需求分析</p>
<p> 明确被测系统–&gt;明确测试内容–&gt;明确测试策略–&gt;明确测试指标</p>
 

<p> （1）明确被测系统</p>
<ul>
<li><p>熟悉被测系统的<font color=red>业务功能</font></p>
</li>
<li><p>熟悉被测系统的<font color=red>技术架构</font></p>
</li>
</ul>
<p> （2）明确测试内容</p>
<ul>
<li><p>业务角度：用户使用频率较高的关键业务功能</p>
</li>
<li><p>技术角度：逻辑复杂度高的业务、数据量大的业务</p>
</li>
</ul>
<p> （3）明确测试策略</p>
<ul>
<li><p>负载测试</p>
</li>
<li><p>稳定性测试</p>
</li>
<li><p>并发测试</p>
</li>
<li><p>。。。</p>
</li>
</ul>
<p> （4）明确测试指标</p>
<ul>
<li><p>有明确性能指标：执行结果与预期指标进行比对</p>
</li>
<li><p>没有明确性能指标（分析指标）：查找资料、类似系统对比、对未来流量的预估</p>
</li>
</ul>
</li>
<li><p>性能测试计划和方案</p>
<p> （1）测什么</p>
<ul>
<li><p>项目背景</p>
</li>
<li><p>测试目的</p>
</li>
<li><p>测试范围</p>
</li>
</ul>
<p> （2）谁来测</p>
<ul>
<li><p>进度与分工</p>
</li>
<li><p>交付清单</p>
</li>
</ul>
<p> （3）怎么测</p>
<ul>
<li>测试策略</li>
</ul>
</li>
<li><p>性能测试用例</p>
<p> 名称、编号、描述、前置条件、步骤、期望结果、（优先级）</p>
 


</li>
<li><p>性能测试执行</p>
 
</li>
<li><p>性能分析调优</p>
<p> 说明：性能测试分析人员经过对结果的分析以后，如果不符合性能需求，则提出性能bug，然后由开发人员进行后续的调优。</p>
<p> 提示：</p>
<ul>
<li><p>调优：开发人员为主导，数据库管理员、系统管理员、网络管理员、性能测试分析人员配合进行</p>
</li>
<li><p>验证：性能测试人员继续进行第二轮、第三轮…的测试，与以前的测试结果进行对比，从而确定经过调整以后系统的性能是否有提升</p>
</li>
</ul>
</li>
<li><p>性能测试报告</p>
<p> 测试报告是对性能测试工作的总结，为软件后续验收和交付打下基础。</p>
<p> 测试报告的主要内容：</p>
<ul>
<li><p>测试工作的经过回顾</p>
</li>
<li><p>缺陷分析和调优</p>
</li>
<li><p>风险评估</p>
</li>
<li><p>性能测试结果</p>
</li>
<li><p>性能工作总结与改进（可选）</p>
</li>
</ul>
</li>
</ol>
<h2 id="JMeter"><a href="#JMeter" class="headerlink" title="JMeter"></a>JMeter</h2><h3 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h3><p>1、安装JDK</p>
<p>2、安装支持JDK版本的JMeter版本</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>1、部署上线后测试主要业务接口支持的负载量（如果业务有要求）</p>
<p>2、使用方式：现用现查</p>
<div class="post-tags"><a class="post-tag-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">#测试</a></div></article><div id="paginator"></div></div></div><div id="bottom-outer"><div id="bottom-inner"><hr><div><div><a>2024</a><a href="/atom.xml"></a></div><div id="hexo"><a>@jinzbone 版权所有</a></div></div></div></div></div></body><script src="/js/oasis.js"></script></html>